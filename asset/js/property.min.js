!function(t,a,e){function n(a,e){return t.ajax({type:'POST',url:darkxee_plist.callurl,data:{action:'getlList',attr:a},dataType:'json',success:function(n){var i;a='property'==a?'pro_name':'name',t.each(n,function(t,e){i+=`<option value="${e.id}">${e[a]}</option>`}),t('#'+e).append(i)}})}function i(){t('#property_list').change(function(){t('#tenant_data input').val(''),t('#landlord_data input').val(''),t.ajax({type:'POST',url:darkxee_plist.callurl,data:{action:'get_property_detail',pid:t(this).val()},success:function(a){a=(a=JSON.parse(a))[0],t('#property_data input').each(function(){var e=t(this).attr('name');t(this).val(a[e])}),l('landlord',a.landlord_id),l('tenant',a.tenant_id),t(' #property_data .edit-data ').each(function(){t(this).css('width',t(this).textWidth()+10+'px'),t(this).on('mouseenter mouseleave change keydown',function(){t(this).css('width',t(this).textWidth()+10+'px')})}),t('.property_btn_update').click(function(a){a.preventDefault();var e=t(this).parent().find('.edit-data'),n=t(this).parent('ul').attr('id').split('_');n=n[0],console.log(n);var i=[];e.each(function(){var a=t(this).attr('name'),e=t(this).val();i.push({field:a,val:e})}),'property'==n&&i.push({field:'landlord_id',val:t('#landlord_data input[name="id"]').val()},{field:'tenant_id',val:t('#tenant_data input[name="id"]').val()}),d(n,i)})}})})}function d(a,e){t.ajax({type:'POST',url:darkxee_plist.callurl,data:{action:'checklist_update_table',table_data:e,table_name:a},success:function(e){console.log(e),t('#'+a+'_data_update').fadeOut(),t('#'+a+'_data input[name="name"]').change(function(){t('#'+a+'_data_update').fadeIn()})}})}function l(a,e){t.ajax({type:'POST',url:darkxee_plist.callurl,data:{action:'get_people',table_name:a,id:e},success:function(e){var n=0!=(e=JSON.parse(e)).length;e=e[0];var i='#'+a+'_data input',d='#'+a+'_list';n?t(d).val(e.id):t(d).val(0),t(i).each(function(){if(n){var a=t(this).attr('name');t(this).val(e[a])}t(this).css('width',t(this).textWidth()+10+'px'),t(this).on('mouseenter mouseleave change keydown',function(){t(this).css('width',t(this).textWidth()+10+'px')})})}})}e.ready(function(){n('property','property_list'),n('tenant','Tenant_list'),n('landlord','Landlord_list')}),t.fn.textWidth=function(a,e){return t.fn.textWidth.fakeEl||(t.fn.textWidth.fakeEl=t('<span>').hide().appendTo(document.body)),t.fn.textWidth.fakeEl.text(a||this.val()||this.text()).css('font',e||this.css('font')),t.fn.textWidth.fakeEl.width()}}(jQuery,jQuery(window),jQuery(document));