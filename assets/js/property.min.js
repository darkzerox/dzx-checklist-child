!function(t,a,e){function r(){n("property","property_list")}function i(a,e,r){var i=t("#"+a).serializeArray();"update"==r&&l(e,i),"insert"==r&&d(e,i)}function n(a,e){return t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"getlList",attr:a},dataType:"json",success:function(r){var i="";i="property"==a?"pro_name":"name";var n='<option value="-99">Select Property</option>';t.each(r,function(t,a){n+=`<option value="${a.id}" data-tokens="${a.pro_id} ${a[i]}" data-subtext="${a.pro_id}">${a[i]}</option>`}),t("#"+e+" option").not(".non-select").remove(),t("#"+e).append(n),"name"==i&&(t("#input_"+a+" option").not(".non-select").remove(),t("#input_"+a).append(n)),t(".bootstrap-select").click(function(){t(this).find(".dropdown-menu").hasClass("show")?t(this).find(".dropdown-menu").removeClass("show"):t(this).find(".dropdown-menu").addClass("show")})}})}function o(){t(".data-list").change(function(){var a=t(this),e=t(this).attr("data"),r=t(this).val();t('.btn[ac="del"]').attr("fid",r),t("#"+e+"-form .btn").text("Update").removeClass("btn-info").addClass("btn-primary").attr("ac","update"),r>-1?t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"get_property_detail",pid:t(this).val(),t:e},dataType:"json",success:function(r){r=r[0],t("#"+e+"-form .form-control").each(function(){var a=t(this).attr("name");t(this).val(r[a])}),a.hasClass("page-data-list")&&(t("#property_data_dialog_title").text(r.pro_name),t("#property_data_dialog #pro_address").text(r.address),t("#property_data_dialog #pro_district").text(r.district),t("#property_data_dialog #pro_city").text(r.city),t("#property_data_dialog #pro_provice").text(r.provice),t("#property_data_dialog #pro_zipcode").text(r.zipcode),t("#property_data_dialog #pro_start").text(r.startdate),t("#property_data_dialog #pro_end").text(r.enddate),t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"getuserData",id:r.landlord_id,type:"landlord"},success:function(a){"admin"!=(a=JSON.parse(a)).nickname[0]&&("first_name"in a&&t("#property_data_dialog #landlord_name").text(a.first_name[0]),"address"in a&&t("#property_data_dialog #landlord_address").text(a.address[0]),"district"in a&&t("#property_data_dialog #landlord_district").text(a.district[0]),"city"in a&&t("#property_data_dialog #landlord_city").text(a.city[0]),"provice"in a&&t("#property_data_dialog #landlord_provice").text(a.provice[0]),"zipcode"in a&&t("#property_data_dialog #landlord_zipcode").text(a.zipcode[0]),"phone"in a&&t("#property_data_dialog #landlord_tel").text(a.phone[0]),"email"in a&&t("#property_data_dialog #landlord_email").text(a.email))}}),t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"getuserData",id:r.tenant_id,type:"tenant"},success:function(a){"admin"!=(a=JSON.parse(a)).nickname[0]&&("first_name"in a&&t("#property_data_dialog #tenant_name").text(a.first_name[0]),"address"in a&&t("#property_data_dialog #tenant_address").text(a.address[0]),"district"in a&&t("#property_data_dialog #tenant_district").text(a.district[0]),"city"in a&&t("#property_data_dialog #tenant_city").text(a.city[0]),"provice"in a&&t("#property_data_dialog #tenant_provice").text(a.provice[0]),"zipcode"in a&&t("#property_data_dialog #tenant_zipcode").text(a.zipcode[0]),"phone"in a&&t("#property_data_dialog #tenant_tel").text(a.phone[0]),"email"in a&&t("#property_data_dialog #tenant_email").text(a.email))}}),t("#btnInventory").click())}}):(t("#"+e+"-form").find("input").val(""),t("#"+e+"-form .btn").text("Insert").removeClass("btn-primary").addClass("btn-info").attr("ac","insert"))})}function d(a,e){t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"checklist_insert_table",td:e,tn:a},success:function(e){var i;1==e?(t("#"+a+"-form input").val(""),r(),i='<div class="alert alert-success" role="alert">Success</div>'):i='<div class="alert alert-danger" role="alert">Fail</div>',t("#"+a+"-form .state ").html(i).fadeIn("fast").delay(3e3).fadeOut("fast")}})}function l(a,e){t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"checklist_update_table",table_data:e,table_name:a},success:function(e){var i;1==e?(t("#"+a+"-form input").val(""),r(),i='<div class="alert alert-success" role="alert">Success</div>'):i='<div class="alert alert-danger" role="alert">Fail</div>',t("#"+a+"-form .state ").html(i).fadeIn("fast").delay(3e3).fadeOut("fast")}})}function s(a,e){t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"checklist_del_table",tid:e,tn:a},success:function(e){var i;1==e?(t("#"+a+"-form input").val(""),r(),i='<div class="alert alert-success" role="alert">Success</div>'):i='<div class="alert alert-danger" role="alert">Fail</div>',t("#"+a+"-form .state ").html(i).fadeIn("fast").delay(3e3).fadeOut("fast")}})}function c(a,e){t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"get_people",table_name:a,id:e},success:function(e){var r=0!=(e=JSON.parse(e)).length;e=e[0];var i="#"+a+"_data input",n="#"+a+"_list";r?t(n).val(e.id):t(n).val(0),t(i).each(function(){if(r){var a=t(this).attr("name");t(this).val(e[a])}t(this).css("width",t(this).textWidth()+10+"px"),t(this).on("mouseenter mouseleave change keydown",function(){t(this).css("width",t(this).textWidth()+10+"px")})})}})}function p(a,e){t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"build_sess",sName:a,sVal:e}})}function _(){var t=new Date,a=t.getMonth()+1,e=t.getDate(),r;return t.getFullYear()+"-"+((""+a).length<2?"0":"")+a+"-"+((""+e).length<2?"0":"")+e+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}t(document).ajaxComplete(function(){t("#property_list").selectpicker("destroy").selectpicker({liveSearch:!0,title:"Please select"})}),e.ready(function(){t(".furniture-list li").click(function(a){a.preventDefault(),p("roID",t(this).attr("data")),p("roN",t(this).text()),t(this).find("a").css("color","#ffffff"),setTimeout(function(){location.href="/inventory/room/"},800)}),t.wpMediaUploader();var a=t(".fern_data tr:last-child").html(),e=t(".fern_data tr:first-child").attr("room");t(".insert_row").click(function(){t(".fern_data").append("<tr class='new-row' field='-1' room='"+e+"'>"+a+"</tr>")}),t(".fer_check").click(function(){var a;t(this).find("svg").toggleClass("isCheck"),0==t(this).find("input").attr("val")?t(this).find("input").attr("val",1):t(this).find("input").attr("val",0)}),t(".btn-del-fern").click(function(){var a="";a=t(this).attr("data-val");var e=t(".fern_data tr[field="+a+"]").find(".fer_name").val(),r=t(".fern_data tr[field="+a+"]").find(".fer_data.fer_img").attr("src");r=void 0===r?"":r,t(".modal-body.del_fern").html(`<div class="fern-dialog-body center"><p>${e}</p><img src="${r}" /></div>`),t(".btn-fern-conf").attr("da",a),t(".btn-fern-conf").click(function(){a=t(this).attr("da"),t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"fern_del",d:a},success:function(e){console.log(e),t("#del-fern").modal("hide"),t(".fern_data tr[field="+a+"]").remove()}})})}),t(".update_fern").click(function(){var a=[];t(".fern_data tr").each(function(){var e={};e.room=t(this).attr("room"),e.row_1=t(this).attr("field"),e.row_name=t(this).find(".fer_name").val(),e.row_img=t(this).find(".fer_img .fer_img").attr("src"),void 0==e.row_img&&(e.row_img=""),e.row_check_in=t(this).find(".fer_check_in").attr("val"),e.row_inphoto=t(this).find(".fer_img_in .fer_img").attr("src"),void 0==e.row_inphoto&&(e.row_inphoto=""),e.row_in_comment=t(this).find(".fer_comm_in").val(),e.row_check_out=t(this).find(".fer_check_out").attr("val"),e.row_outphoto=t(this).find(".fer_img_out .fer_img").attr("src"),void 0==e.row_outphoto&&(e.row_outphoto=""),e.row_out_comment=t(this).find(".fer_comm_out").val(),e.row_date=_(),a.push(e)}),console.log(a),t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"fern_insert",d:a},success:function(t){console.log(t),location.reload()}})}),r(),t(".property-group .btn").click(function(a){a.preventDefault(),a.stopPropagation();var e=t(this).attr("go"),r=t(this).attr("ac"),n=t(this).attr("fid");"update"==r&&i(e+"-form",e,"update"),"insert"==r&&i(e+"-form",e,"insert"),"del"==r&&s(e,n)}),t('.btn[ac="new"]').click(function(){var a=t(this).attr("go");t("#"+a+"-form").find("input").val(""),t("#"+a+"-form .btn").text("Insert").removeClass("btn-primary").addClass("btn-info").attr("ac","insert")}),o(),t(".date").datepicker({format:"yyyy-mm-dd",todayBtn:!0,todayHighlight:!0})}),t.fn.textWidth=function(a,e){return t.fn.textWidth.fakeEl||(t.fn.textWidth.fakeEl=t("<span>").hide().appendTo(document.body)),t.fn.textWidth.fakeEl.text(a||this.val()||this.text()).css("font",e||this.css("font")),t.fn.textWidth.fakeEl.width()}}(jQuery,jQuery(window),jQuery(document));