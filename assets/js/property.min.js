!function(t,a,e){function i(){o("property","property_list")}function r(a,e,i){var r=t("#"+a).serializeArray();"update"==i&&l(e,r),"insert"==i&&d(e,r)}function o(a,e){return t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"getlList",attr:a},dataType:"json",success:function(i){var r="";r="property"==a?"pro_name":"name";var o='<option value="-99">Select Property</option>';t.each(i,function(t,a){o+=`<option value="${a.id}" data-tokens="${a.pro_id} ${a[r]}" data-subtext="${a.pro_id}">${a[r]}</option>`}),t("#"+e+" option").not(".non-select").remove(),t("#"+e).append(o),"name"==r&&(t("#input_"+a+" option").not(".non-select").remove(),t("#input_"+a).append(o)),t(".bootstrap-select").click(function(){t(this).find(".dropdown-menu").hasClass("show")?t(this).find(".dropdown-menu").removeClass("show"):t(this).find(".dropdown-menu").addClass("show")})}})}function n(){t(".data-list").change(function(){var a=t(this),e=t(this).attr("data"),i=t(this).val();t('.btn[ac="del"]').attr("fid",i),t("#"+e+"-form .btn").text("Update").removeClass("btn-info").addClass("btn-primary").attr("ac","update"),i>-1?t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"get_property_detail",pid:t(this).val(),t:e},dataType:"json",success:function(i){i=i[0],t("#"+e+"-form .form-control").each(function(){var a=t(this).attr("name");t(this).val(i[a])}),a.hasClass("page-data-list")&&(t("#property_data_dialog_title").text(i.pro_name),t("#property_data_dialog #pro_address").text(i.address),t("#property_data_dialog #pro_district").text(i.district),t("#property_data_dialog #pro_city").text(i.city),t("#property_data_dialog #pro_provice").text(i.provice),t("#property_data_dialog #pro_zipcode").text(i.zipcode),t("#property_data_dialog #pro_start").text(i.startdate),t("#property_data_dialog #pro_end").text(i.enddate),t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"getuserData",id:i.landlord_id,type:"landlord"},success:function(a){"admin"!=(a=JSON.parse(a)).nickname[0]&&("first_name"in a&&t("#property_data_dialog #landlord_name").text(a.first_name[0]),"address"in a&&t("#property_data_dialog #landlord_address").text(a.address[0]),"district"in a&&t("#property_data_dialog #landlord_district").text(a.district[0]),"city"in a&&t("#property_data_dialog #landlord_city").text(a.city[0]),"provice"in a&&t("#property_data_dialog #landlord_provice").text(a.provice[0]),"zipcode"in a&&t("#property_data_dialog #landlord_zipcode").text(a.zipcode[0]),"phone"in a&&t("#property_data_dialog #landlord_tel").text(a.phone[0]),"email"in a&&t("#property_data_dialog #landlord_email").text(a.email))}}),t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"getuserData",id:i.tenant_id,type:"tenant"},success:function(a){"admin"!=(a=JSON.parse(a)).nickname[0]&&("first_name"in a&&t("#property_data_dialog #tenant_name").text(a.first_name[0]),"address"in a&&t("#property_data_dialog #tenant_address").text(a.address[0]),"district"in a&&t("#property_data_dialog #tenant_district").text(a.district[0]),"city"in a&&t("#property_data_dialog #tenant_city").text(a.city[0]),"provice"in a&&t("#property_data_dialog #tenant_provice").text(a.provice[0]),"zipcode"in a&&t("#property_data_dialog #tenant_zipcode").text(a.zipcode[0]),"phone"in a&&t("#property_data_dialog #tenant_tel").text(a.phone[0]),"email"in a&&t("#property_data_dialog #tenant_email").text(a.email))}}),t("#btnInventory").click())}}):(t("#"+e+"-form").find("input").val(""),t("#"+e+"-form .btn").text("Insert").removeClass("btn-primary").addClass("btn-info").attr("ac","insert"))})}function d(a,e){t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"checklist_insert_table",td:e,tn:a},success:function(e){var r;1==e?(t("#"+a+"-form input").val(""),i(),r='<div class="alert alert-success" role="alert">Success</div>'):r='<div class="alert alert-danger" role="alert">Fail</div>',t("#"+a+"-form .state ").html(r).fadeIn("fast").delay(3e3).fadeOut("fast")}})}function l(a,e){t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"checklist_update_table",table_data:e,table_name:a},success:function(e){var r;1==e?(t("#"+a+"-form input").val(""),i(),r='<div class="alert alert-success" role="alert">Success</div>'):r='<div class="alert alert-danger" role="alert">Fail</div>',t("#"+a+"-form .state ").html(r).fadeIn("fast").delay(3e3).fadeOut("fast")}})}function s(a,e){t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"checklist_del_table",tid:e,tn:a},success:function(e){var r;1==e?(t("#"+a+"-form input").val(""),i(),r='<div class="alert alert-success" role="alert">Success</div>'):r='<div class="alert alert-danger" role="alert">Fail</div>',t("#"+a+"-form .state ").html(r).fadeIn("fast").delay(3e3).fadeOut("fast")}})}function c(a,e){t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"get_people",table_name:a,id:e},success:function(e){var i=0!=(e=JSON.parse(e)).length;e=e[0];var r="#"+a+"_data input",o="#"+a+"_list";i?t(o).val(e.id):t(o).val(0),t(r).each(function(){if(i){var a=t(this).attr("name");t(this).val(e[a])}t(this).css("width",t(this).textWidth()+10+"px"),t(this).on("mouseenter mouseleave change keydown",function(){t(this).css("width",t(this).textWidth()+10+"px")})})}})}function p(a,e){t.ajax({type:"POST",url:darkxee_plist.callurl,data:{action:"build_sess",sName:a,sVal:e}})}t(document).ajaxComplete(function(){t("#property_list").selectpicker("destroy").selectpicker({liveSearch:!0,title:"Please select"})}),e.ready(function(){t.wpMediaUploader();var a=t(".fern_data tr:last-child").html(),e=t(".fern_data tr:first-child").attr("room");t(".insert_row").click(function(){t(".fern_data").append("<tr class='new-row' field='-1' room='"+e+"'>"+a+"</tr>")}),t(".fer_check").click(function(){var a;t(this).find("svg").toggleClass("isCheck"),0==t(this).find("input").attr("val")?t(this).find("input").attr("val",1):t(this).find("input").attr("val",0)}),t(".update_fern").click(function(){var a=[];t(".fern_data tr").each(function(){var e={};e.room=t(this).attr("room"),e.row_1=t(this).attr("field"),e.row_name=t(this).find(".fer_name").val(),e.row_img=t(this).find(".fer_img .fer_img").attr("src"),void 0==e.row_img&&(e.row_img=""),e.row_check_in=t(this).find(".fer_check_in").attr("val"),e.row_inphoto=t(this).find(".fer_img_in .fer_img").attr("src"),void 0==e.row_inphoto&&(e.row_inphoto=""),e.row_in_comment=t(this).find(".fer_comm_in").val(),e.row_check_out=t(this).find(".fer_check_out").attr("val"),e.row_outphoto=t(this).find(".fer_img_out .fer_img").attr("src"),void 0==e.row_outphoto&&(e.row_outphoto=""),e.row_out_comment=t(this).find(".fer_comm_out").val(),a.push(e)}),console.log(a)}),i(),t(".property-group .btn").click(function(a){a.preventDefault(),a.stopPropagation();var e=t(this).attr("go"),i=t(this).attr("ac"),o=t(this).attr("fid");"update"==i&&r(e+"-form",e,"update"),"insert"==i&&r(e+"-form",e,"insert"),"del"==i&&s(e,o)}),t('.btn[ac="new"]').click(function(){var a=t(this).attr("go");t("#"+a+"-form").find("input").val(""),t("#"+a+"-form .btn").text("Insert").removeClass("btn-primary").addClass("btn-info").attr("ac","insert")}),n(),t(".date").datepicker({format:"yyyy-mm-dd",todayBtn:!0,todayHighlight:!0}),t(".furniture-list li").click(function(){p("roID",t(this).attr("data")),p("roN",t(this).text())})}),t.fn.textWidth=function(a,e){return t.fn.textWidth.fakeEl||(t.fn.textWidth.fakeEl=t("<span>").hide().appendTo(document.body)),t.fn.textWidth.fakeEl.text(a||this.val()||this.text()).css("font",e||this.css("font")),t.fn.textWidth.fakeEl.width()}}(jQuery,jQuery(window),jQuery(document));